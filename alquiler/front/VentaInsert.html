<!DOCTYPE html>
<html>
    <!--              -------Creado por-------               -->
    <!--             \(x.x )/ Anarchy \( x.x)/               -->
    <!--              ------------------------               -->
    <!-- Sweet Alert -->
    <link href="css/plugins/sweetalert/sweetalert.css" rel="stylesheet">

    <!--//    Les traigo amor  \\                  -->
    <div>
        <div class="panel panel-default">
            <div align=center class="panel-heading"><h3 class="panel-title">Registrar persona</h3></div>
            <div align=center class="panel-body">
                <form role="form" id="PersonaInsert">


                    <div class="row">
                        <div class="col-lg-6">

                            <div class="form-group">
                                <label for="Inputpersona_nombre">Nombre y Apellido</label>
                                <input type="text" name="persona_nombre" class="form-control" id="Inputpersona_nombre" placeholder="Nombre y Apellido" required>
                            </div>
                            <div class="form-group">
                                <label for="Inputpersona_cedula">Cedula</label>
                                <input type="text" name="persona_cedula" class="form-control" id="Inputpersona_cedula" placeholder="Cedula" required>
                            </div>

                            <div class="form-group">
                                <label for="Inputproductos">Productos</label>
                                <select name="Inputproductos" class="form-control" id="Inputproductos">

                                </select> 
                            </div>        


                        </div>


                        <div class="col-lg-6">

                            <div class="form-group">
                                <label for="Inputpersona_alergia">Alergia</label>
                                <input type="text" name="persona_alergia" class="form-control" id="Inputpersona_alergia" placeholder="Alergia" required>
                            </div>

                            <div class="form-group">
                                <label for="Inputpersona_tel_contacto">Tel_Contacto</label>
                                <input type="text" name="persona_tel_contacto" class="form-control" id="Inputpersona_tel_contacto" placeholder="Telefono contacto" required>
                            </div>

                        </div>

                    </div>

                    <button type="button" class="btn btn-primary" onclick="registraraPersona()">Registrar</button>
                </form>
            </div><!-- panel-body -->
        </div> <!-- panel -->
    </div>

    <!-- Sweet alert -->
    <script src="js/plugins/sweetalert/sweetalert.min.js"></script>
    
    <script src="js/plugins/steps/jquery.steps.min.js"></script>
    <script src="js/plugins/validate/jquery.validate.min.js"></script>
    <script src="js/Ajax.js "></script>
    <script src="js/ViewManager.js "></script>
    <script src="js/HtmlBuilder.js "></script>


    <script>
                        $(document).ready(function () {
                            cargarVentas();
                        });
    </script>

    <script>


        function registraraPersona() {

            var url1 = "../back/controller/persona_insert.php";
            //  console.log($("#PersonaInsert").serialize());
            $.ajax({
                type: "POST",
                url: url1,
                data: $("#PersonaInsert").serialize(),

                success: function (data) {
                    //  console.log(data);

                    if (data == 1) {

                        //     console.log("sirve");

                        aceptarPersona();
                        // alert("true");
                    }
                    if (data == 2) {
                        errorPersona();
                    } else {
                        errorPersona();
                    }

                }
            });

        }
        ;

        function aceptarPersona() {


            swal({
                title: "Registro",
                text: "Registro Exitoso!",
                type: "success",
                // showCancelButton: true,
                confirmButtonColor: "#1ab394",
                confirmButtonText: "Ok",
                // cancelButtonText: "No, cancel plx!",
                //   closeOnConfirm: false,
                closeOnCancel: false},
                    function (isConfirm) {
                        if (isConfirm) {
                            // alert('mySelect2'+mySelect2);
                            //  console.log("mySelect2");
                            Persona_Listar();
                            //  swal("Deleted!", "Your imaginary file has been deleted.", "success");
                        } else {
                            swal("Cancelled", "Your imaginary file is safe :)", "error");
                        }
                    });

        }
        ;

        function errorPersona() {


            swal({
                title: "Error",
                text: "Complete los Campos!",
                type: "error",
                // showCancelButton: true,
                confirmButtonColor: "#dd6b55",
                confirmButtonText: "Ok",
                // cancelButtonText: "No, cancel plx!",
                //   closeOnConfirm: false,
                closeOnCancel: false},
                    function (isConfirm) {
                        if (isConfirm) {
                            // alert('mySelect2'+mySelect2);
                            //  console.log("mySelect2");
                            //  Persona_Listar();
                            //  swal("Deleted!", "Your imaginary file has been deleted.", "success");
                        } else {
                            swal("Cancelled", "Your imaginary file is safe :)", "error");
                        }
                    });

        }
        ;

    </script>

    <script>
        function cargarVentas() {
            $.get('../back/controller/Productos_Detalles.php', function (depa) {

                var mySelect = document.getElementById("Inputproductos");
                removeAllChildren(mySelect);
                mySelect.appendChild(createOPTION(-1, 'SELECCIONE'));
                depa = JSON.parse(depa);
                for (var i = 1; i < depa.length; i++) {
                    mySelect.appendChild(createOPTION(depa[i].id, depa[i].nombre));
                }

            });
        }
    </script>

    <!-- That`s all folks! -->
</html>